# üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ main.py –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞

–û—à–∏–±–∫–∞ –±—ã–ª–∞ –≤ —Å—Ç—Ä–æ–∫–µ 553 - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `global`.

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ scp (—Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞)

```bash
cd ~/PycharmProjects/telegramm_bot
scp main.py root@212.67.11.50:/opt/reklama_bot/
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—Ä—É—á–Ω—É—é

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /opt/reklama_bot

# –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
cp main.py main.py.backup

# –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É 553 - —É–±—Ä–∞—Ç—å "global bot_thread"
sed -i '553s/.*/        if bot_thread is None or not bot_thread.is_alive():/' main.py
```

–ò–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ nano:

```bash
nano main.py
```

–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É 553 –∏ —É–¥–∞–ª–∏—Ç–µ `global bot_thread` —Ç–∞–∫, —á—Ç–æ–±—ã –±—ã–ª–æ:
```python
        if bot_thread is None or not bot_thread.is_alive():
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: Ctrl+O, Enter, Ctrl+X

---

## –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```bash
cd /opt/reklama_bot

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç
pkill -9 -f "python3 main.py"

# –ü–æ–¥–æ–∂–¥–∞—Ç—å
sleep 2

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
nohup python3 main.py > bot.log 2>&1 &

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
sleep 5
tail -30 bot.log
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞:

–í –ª–æ–≥–∞—Ö –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–∫–∏ SyntaxError.

