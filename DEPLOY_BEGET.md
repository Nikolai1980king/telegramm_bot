# Инструкция по размещению бота на Beget

## Важно: Особенности Beget

**Beget поддерживает Python приложения, но есть особенности:**
1. Нужен тарифный план с поддержкой Python (обычно от "Профи" и выше)
2. Python приложения запускаются через панель управления
3. Возможны ограничения на долгоживущие процессы

## Альтернативные варианты (рекомендуется)

Если на Beget будут проблемы, рассмотрите:
- **VPS/VDS сервер** (например, Timeweb, Reg.ru) - полный контроль, ~300-500₽/месяц
- **PythonAnywhere** - специализированный хостинг для Python
- **Heroku** (платный) или **Railway** (бесплатный тариф)

---

## Шаг 1: Подготовка на локальном компьютере

### 1.1. Авторизация (создание session файла)

1. Запустите бота локально один раз:
   ```bash
   python main.py
   ```

2. При первой авторизации введите код из Telegram

3. После успешной авторизации появятся файлы:
   - `session_name.session` 
   - `session_name.session-journal` (может отсутствовать)

4. **Эти файлы нужно будет загрузить на сервер!**

### 1.2. Обновите пути в bot_config.json

Замените абсолютные пути на относительные или используйте веб-интерфейс на сервере для настройки.

---

## Шаг 2: Загрузка файлов на Beget

### 2.1. Загрузите файлы через FTP/SFTP или файловый менеджер:

```
/home/u1234567/telegram_bot/  (ваша директория)
├── main.py
├── bot_config.json
├── requirements.txt
├── session_name.session       (ВАЖНО: загрузите после авторизации!)
├── session_name.session-journal
├── templates/
│   └── index.html
└── image/
    └── cart_1.png
```

### 2.2. Создайте необходимые директории на сервере

---

## Шаг 3: Установка зависимостей на Beget

### Вариант A: Через панель управления Beget

1. Войдите в панель управления Beget
2. Найдите раздел "Python" или "Python приложения"
3. Укажите путь к проекту
4. Установите зависимости через pip:
   ```bash
   pip3 install -r requirements.txt --user
   ```

### Вариант B: Через SSH (если доступен)

```bash
cd /home/u1234567/telegram_bot/
pip3 install --user -r requirements.txt
```

---

## Шаг 4: Настройка путей в bot_config.json

После загрузки на сервер обновите пути в `bot_config.json`:

```json
{
    "photo_path": "image/cart_1.png",  // относительный путь
    "session_file": "session_name"     // относительный путь
}
```

Или настройте через веб-интерфейс после запуска бота.

---

## Шаг 5: Запуск бота на Beget

### Вариант A: Как Python приложение в панели Beget

1. В панели управления найдите раздел "Python приложения"
2. Создайте новое приложение
3. Укажите путь к `main.py`
4. Укажите порт (если требуется)
5. Запустите приложение

### Вариант B: Через SSH + screen/tmux (если доступен SSH)

```bash
# Установите screen (если нет)
# Запустите бота в screen сессии
screen -S telegram_bot
cd /home/u1234567/telegram_bot/
python3 main.py

# Отключитесь: Ctrl+A, затем D
# Вернуться: screen -r telegram_bot
```

### Вариант C: Как systemd service (если есть root доступ)

Создайте файл `/etc/systemd/system/telegram_bot.service`:

```ini
[Unit]
Description=Telegram Bot
After=network.target

[Service]
Type=simple
User=u1234567
WorkingDirectory=/home/u1234567/telegram_bot
ExecStart=/usr/bin/python3 /home/u1234567/telegram_bot/main.py
Restart=always

[Install]
WantedBy=multi-user.target
```

Затем:
```bash
sudo systemctl enable telegram_bot
sudo systemctl start telegram_bot
```

---

## Шаг 6: Доступ к веб-интерфейсу

Бот запускает Flask на порту 5000.

### Если Beget предоставляет домен для Python приложений:
- Используйте предоставленный URL

### Если нужно настроить через поддомен:
- В панели Beget настройте поддомен или домен для вашего приложения

### Если порт недоступен извне:
- Используйте SSH туннель для доступа:
  ```bash
  ssh -L 5000:localhost:5000 u1234567@your-beget-server.com
  ```
  Затем откройте http://localhost:5000

---

## Важные замечания

### ⚠️ Ограничения Beget:
- Некоторые тарифы могут иметь ограничения на долгоживущие процессы
- Python приложения могут перезапускаться или останавливаться
- Проверьте тарифный план на поддержку долгоживущих процессов

### ✅ Рекомендации:
1. **Первый запуск делайте локально** - для создания session файла
2. **Регулярно проверяйте логи** - чтобы убедиться, что бот работает
3. **Рассмотрите VPS** - для более надежной работы 24/7

---

## Проверка работы

1. Откройте веб-интерфейс бота
2. Проверьте статус
3. Запустите бота через интерфейс
4. Проверьте логи на наличие ошибок

---

## Решение проблем

### Бот не запускается:
- Проверьте логи в панели Beget
- Убедитесь, что все файлы загружены
- Проверьте пути к файлам в конфиге

### Ошибка авторизации:
- Убедитесь, что session файл загружен на сервер
- Проверьте права доступа к файлам (chmod 644)

### Бот останавливается:
- Проверьте ограничения тарифного плана
- Настройте автозапуск (systemd или cron)
- Рассмотрите использование VPS

---

## Альтернатива: VPS сервер

Если на Beget возникают проблемы, рекомендую:
- **Timeweb VPS** - от 199₽/месяц
- **Reg.ru VDS** - от 299₽/месяц  
- Полный контроль над сервером
- Гарантированная работа 24/7


